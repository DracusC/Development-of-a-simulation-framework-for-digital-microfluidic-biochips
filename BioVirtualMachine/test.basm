#Testing program
.data
#DEF x_addr 10
#intdata: INT x_addr+0 123
#realdata: REAL x_addr+1 1/3

#xdata: REAL 100 1/3
#ydata: REAL 101 1/6

.configuration
data_memory_size -1
private_data_memory_start_address 1000
debug_log_data_types_for_print_formatting true
debug_keep_all_private_data_memories true

#logger_log_DEBUG_to_console true
#logger_log_INFO_to_console true
#logger_log_WARNING_to_console true
#logger_log_ERROR_to_console true
#logger_log_FATAL_to_console true
#logger_log_TRACE_to_console true
#logger_log_DEBUG_to_file false
#logger_log_INFO_to_file false
#logger_log_WARNING_to_file false
#logger_log_ERROR_to_file false
#logger_log_FATAL_to_file false
#logger_log_TRACE_to_file false

.text
DEF zero 0
DEF elecToSet 1
DEF elecToClr 2
DEF maxX 3
DEF minX 4
DEF steps 5

#DEF luca 180
#DEF marco 100
#DEF mauro 100

#def aa 100
#def bb 10

#ji init;

#LI min(aa,bb%3) 100;
#F_ADD 102 xdata ydata;
#F_ADD 1000+102 xdata ydata;
#TSTART t1;
#TSTOP;
#TICK;

#t1:
#F_ADD 103 xdata ydata;
#F_ADD 1000+102 xdata ydata;
#F_ADD 1000+103 xdata ydata;
#TSTART t2;
#TSTOP;
#TICK;

#t2:
#F_ADD 104 xdata ydata;
#F_ADD 1000+104 xdata ydata;
#TSTOP;
#TICK;

init:
  LI zero 0;
  LI elecToSet 100;
  LI elecToClr 101;
  LI minX 100;
  LI maxX 124;
  LI steps 4;

main:
  SETEL elecToSet;
  TICK;
  CLREL elecToClr;
  TICK;

  ADDI elecToClr elecToSet 0; #Copy
  ADDI elecToSet elecToSet 1;

  SUBI steps steps 1;
  BEQ end steps zero;

  BGE backwards elecToSet maxX;
  JI main;

backwards:
  SETEL elecToSet;
  TICK;
  CLREL elecToClr;
  TICK;

  ADDI elecToClr elecToSet 0; #Copy
  SUBI elecToSet elecToSet 1;

  SUBI steps steps 1;
  BEQ end steps zero;

  BLE main elecToSet minX;
  JI backwards;

end:
  TSTOP;
  TICK;

#old_start:
#  LI 0 0;
#  LI 1 1;
#  TSTART task_1;
#  TSTART task_2;
#  TICK;
#  LI 3 3;
#  DEVWR 10 100;
#  DEVWR 10 150;
#  BARR 1 3;
#  LI 5 5;
#  TSTOP;
#  TICK;
#
#task_1:
#  LI 10 10;
#  LI 20 20;
#  LI 30 30;
#  LI 40 40;
#  LI 50 50;
#  LI 60 60;
#  DEVWR 11 100;
#  BARR 1 3;
#  TSTOP;
#  TICK;
#
#task_2:
#  LI 100 100;
#  LI 200 200;
#  LI 300 300;
#  LI 400 400;
#  LI 500 500;
#  LI 600 600;
#  BARR 1 3;
#  TSTOP;
#  TICK;
